<!DOCTYPE html>
<html class="no-js" lang="de-AT">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Tetris mit Blazor </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.71.1" />
    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,500,600,700,800' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">

    <!-- Stylesheets -->
    
    
    
    <link rel="stylesheet" href="https://linz-preview.coderdojo.net/vendor.min.e379f836cab18e6ea8d09786ef9ff3d7a04bf181d8b2aa661c33635390b6ae98.css">
    <link rel="stylesheet" href="https://linz-preview.coderdojo.net/css/animate.css">

    
    
    
    
    <link rel="stylesheet" href="https://linz-preview.coderdojo.net/style.min.e1bc955fdead84f59d7d5392726733a3d0452b5af3f732d62901a13984247d6e.css">
</head>

<body id="body">
    <!-- NAVIGATION -->
<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light ">
    <div class="container-fluid">
        <a class="navbar-brand" href="/"><img src="/img/logo.png" height="30"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/termine">Termine</a>
                </li>
                <li class="nav-item dropdown ">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Infos
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" href="/info/kinder-und-jugendliche">Für Kinder und Jugendliche</a>
                        <a class="dropdown-item" href="/info/eltern">Für Eltern</a>
                        <a class="dropdown-item" href="/info/mentoren">Für Mentoren</a>
                        <a class="dropdown-item" href="/info/schulen">Für Schulen</a>
                    </div>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/mentoren">Mentoren</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/sponsoring">Sponsoring</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="/uebungsanleitungen">Übungsanleitungen</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

    
    

    

<section id="sushi">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <nav class="breadcrumb-nav" aria-label="breadcrumb">
<ol class="breadcrumb">
    















<li class="breadcrumb-item">
    <a href="https://linz-preview.coderdojo.net/uebungsanleitungen/">Übungsanleitungen</a>
</li>





<li class="breadcrumb-item">
    <a href="https://linz-preview.coderdojo.net/uebungsanleitungen/programmieren/">Programmieren</a>
</li>





<li class="breadcrumb-item">
    <a href="https://linz-preview.coderdojo.net/uebungsanleitungen/programmieren/web/">Web</a>
</li>





<li class="breadcrumb-item active ">
    <a href="https://linz-preview.coderdojo.net/uebungsanleitungen/programmieren/web/blazor-tetris/">Tetris mit Blazor</a>
</li>


</ol>


</nav>

                <div class="sushi-content">
                    

<h1 id="tetris-mit-blazor">Tetris mit Blazor</h1>

<h2 id="kostenlose-voraussetzungen">Kostenlose Voraussetzungen</h2>

<ul>
<li>Neueste Version von <a href="https://visualstudio.microsoft.com/free-developer-offers/" target="_blank">Visual Studio 2017 Community Edition</a> mit <em>ASP.NET and web development</em></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=aspnet.blazor" target="_blank">ASP.NET Core Blazor Language Services</a></li>
</ul>

<h2 id="projekt-anlegen">Projekt anlegen</h2>

<ul>
<li><p>Visual Studio starten</p></li>

<li><p><em>File</em> / <em>New</em> / <em>Project</em></p></li>

<li><p>Neues <em>ASP.NET</em> Projekt anlegen:<br/>
<img src="blazor-tetris/new-project.png" alt="Neues Projekt" /></p></li>

<li><p><em>Blazor</em> Projekttyp auswählen:<br/>
<img src="blazor-tetris/new-blazor-project.png" alt="Blazor" /></p></li>

<li><p>Nach dem Anlegen des Projekt den Startmodus ändern:<br/>
<img src="blazor-tetris/start-as-cmd.png" alt="Startmodus" /></p></li>

<li><p>Probiere, das Programm mit <em>F5</em> oder <em>Debug</em> / <em>Start Debugging</em> zu starten. Es müsste ein Kommandozeilenfenster und ein Browser aufgehen. Im Browser solltest du folgendes sehen:<br/>
<img src="blazor-tetris/hello-world.png" alt="Hello World" /></p></li>

<li><p>Um den Debugger wieder zu beenden, beende das Kommandozeilenfenster.<br/>
<img src="blazor-tetris/close-debugger.png" alt="Debugger beenden" /></p></li>
</ul>

<p>Gratuliere! Du hast dein erstes Blazor-Programm zum Laufen gebracht.</p>

<h2 id="aufräumen">Aufräumen</h2>

<p>Visual Studio hat dir einiges an Code generiert, damit du nicht ganz von vorne starten musst. Einen Teil davon brauchen wir für unser Tetris nicht. Daher müssen wir als erstes im Projekt aufräumen.</p>

<ul>
<li><p>Lösche die in der folgenden Grafik durchgestrichenen Ordner und Dateien aus dem generierten Projekt:<br/>
<img src="blazor-tetris/files-to-delete.png" alt="Dateien löschen" /></p></li>

<li><p>Lösche den Inhalt der Datei <em>css/site.css</em>. <strong>Achtung!</strong> Die Datei selbst muss erhalten bleiben. Lösche nur den <strong>Inhalt</strong>!</p></li>

<li><p>In <em>Pages/index.cshtml</em> muss folgender Code stehen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cs" data-lang="cs">@page <span style="color:#e6db74">&#34;/&#34;</span>

&lt;h1&gt;Tetris&lt;/h1&gt;
</code></pre></div></li>

<li><p>In <em>Shared/MainLayout.cshtml</em> muss folgender Code stehen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cs" data-lang="cs">@inherits BlazorLayoutComponent

@Body
</code></pre></div></li>

<li><p>Probiere, das Programm mit <em>F5</em> oder <em>Debug</em> / <em>Start Debugging</em> zu starten. Es müsste ein Kommandozeilenfenster und ein Browser aufgehen. Im Browser solltest du folgendes sehen:<br/>
<img src="blazor-tetris/cleaned-project.png" alt="Aufgeräumtes Projekt" /></p></li>

<li><p>Um den Debugger wieder zu beenden, beende das Kommandozeilenfenster.</p></li>
</ul>

<p>Super! Jetzt haben wir ein sauberes Projekt und können beginnen, zu programmieren.</p>

<h2 id="spielfeld">Spielfeld</h2>

<p>Als erstes generieren wir das Spielfeld.</p>

<ul>
<li><p>Füge einen Ordner namens <em>Logic</em> zum Projekt hinzu:<br/>
<img src="blazor-tetris/new-folder.png" alt="Add folder" /></p></li>

<li><p>Füge in den Ordner eine Klasse namens <em>BoardContentExtensions.cs</em> hinzu:<br/>
<img src="blazor-tetris/new-class.png" alt="Add class" /></p></li>

<li><p><em>BoardContentExtensions.cs</em> muss folgenden Code enthalten. Es handelt sich um Hilfsfunktionen, mit denen man in Schleifen das Spielfeld durchlaufen (Englisch <em>iterate</em>) kann. Lass dir von jemandem aus dem Mentorenteam den Code erklären.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cs" data-lang="cs"><span style="color:#66d9ef">namespace</span> BlazorTetris.Logic
{
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">delegate</span> <span style="color:#66d9ef">bool</span> CancelableIterator(<span style="color:#66d9ef">int</span> row, <span style="color:#66d9ef">int</span> col);
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">delegate</span> <span style="color:#66d9ef">void</span> Iterator(<span style="color:#66d9ef">int</span> row, <span style="color:#66d9ef">int</span> col);

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BoardContentExtensions</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">bool</span> Iterate(<span style="color:#66d9ef">this</span> <span style="color:#66d9ef">string</span>[,] matrix, CancelableIterator iterator)
    {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> row = <span style="color:#ae81ff">0</span>; row &lt; matrix.GetLength(<span style="color:#ae81ff">0</span>); row++)
        {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> col = <span style="color:#ae81ff">0</span>; col &lt; matrix.GetLength(<span style="color:#ae81ff">1</span>); col++)
            {
                <span style="color:#66d9ef">if</span> (!iterator(row, col))
                {
                    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
                }
            }
        }

        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }


    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> Iterate(<span style="color:#66d9ef">this</span> <span style="color:#66d9ef">string</span>[,] matrix, Iterator iterator) =&gt;
        Iterate(matrix, (row, col) =&gt; { iterator(row, col); <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>; });
}
}
</code></pre></div></li>

<li><p>Ändere den Code in <em>Pages/Index.cshtml</em> wie folgt:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cs" data-lang="cs">@page <span style="color:#e6db74">&#34;/&#34;</span>
@using BlazorTetris.Logic

&lt;h1&gt;Tetris&lt;/h1&gt;

&lt;table&gt;
@for (<span style="color:#66d9ef">var</span> row = <span style="color:#ae81ff">0</span>; row &lt; ROWS; row++)
{
    &lt;tr&gt;
        @for (<span style="color:#66d9ef">var</span> col = <span style="color:#ae81ff">0</span>; col &lt; COLUMNS; col++)
        {
            &lt;td class=<span style="color:#e6db74">&#34;@board[row, col]&#34;</span>&gt;&lt;/td&gt;
        }
    &lt;/tr&gt;
}
&lt;/table&gt;

@if (lost)
{
&lt;h1&gt;Verloren :-(&lt;/h1&gt;
}

@functions {
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> ROWS = <span style="color:#ae81ff">16</span>;
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> COLUMNS = <span style="color:#ae81ff">10</span>;

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">string</span>[,] board;
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">bool</span> lost = <span style="color:#66d9ef">false</span>;

<span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">void</span> OnInit()
{
    InitializeBoard();
}

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> InitializeBoard()
{
    board = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">string</span>[ROWS, COLUMNS];
    board.Iterate((row, col) =&gt; board[row, col] = <span style="color:#66d9ef">string</span>.Empty);
}
}
</code></pre></div></li>

<li><p>Ändere den Code in <em>wwwroot/css/site.css</em> wie folgt:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#f92672">table</span> {
<span style="color:#66d9ef">border-collapse</span>: <span style="color:#66d9ef">collapse</span>;
<span style="color:#66d9ef">border-spacing</span>: <span style="color:#ae81ff">0</span>;
}

<span style="color:#f92672">td</span> {
<span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">25</span><span style="color:#66d9ef">px</span>;
<span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">25</span><span style="color:#66d9ef">px</span>;
<span style="color:#66d9ef">border</span>: <span style="color:#ae81ff">1</span><span style="color:#66d9ef">px</span> <span style="color:#66d9ef">solid</span> <span style="color:#66d9ef">black</span>;
}</code></pre></div></li>

<li><p>Probiere, das Programm mit <em>F5</em> oder <em>Debug</em> / <em>Start Debugging</em> zu starten. Es müsste ein Kommandozeilenfenster und ein Browser aufgehen. Im Browser solltest du folgendes sehen:<br/>
<img src="blazor-tetris/empty-board.png" alt="Leeres Board" /></p></li>

<li><p>Um den Debugger wieder zu beenden, beende das Kommandozeilenfenster.</p></li>
</ul>

<h2 id="tetris-spielsteine">Tetris Spielsteine</h2>

<p>Jetzt brauchen wir Code für die Tetris-Spielsteine. Hier zwei wichtige Links dazu:</p>

<ul>
<li>Eine Liste von Tetris-Spielsteinen und ihrer klassischen Farben findest du unter <a href="https://en.wikipedia.org/wiki/Tetris#Tetromino_colors" target="_blank">https://en.wikipedia.org/wiki/Tetris#Tetromino_colors</a></li>

<li><p>Eine Liste von Farbnamen, die der Browser kennt, findest du unter <a href="https://en.wikipedia.org/wiki/Web_colors" target="_blank">https://en.wikipedia.org/wiki/Web_colors</a></p></li>

<li><p>Erstelle eine neue Klasse <em>Logic/Pieces.cs</em> und füge folgenden Code ein. Lass dir von jemandem aus dem Mentorenteam den Code erklären.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cs" data-lang="cs"><span style="color:#66d9ef">using</span> System;

<span style="color:#66d9ef">namespace</span> BlazorTetris.Logic
{
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Pieces</span>
{
    <span style="color:#75715e">// Color of Tetris pieces: https://en.wikipedia.org/wiki/Tetris#Tetromino_colors
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// Web color names: https://en.wikipedia.org/wiki/Web_colors
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span> __ = <span style="color:#66d9ef">string</span>.Empty;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span> IC = <span style="color:#e6db74">&#34;I&#34;</span>;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span> JC = <span style="color:#e6db74">&#34;J&#34;</span>;

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span>[,] IH = {
        { IC, IC, IC, IC }
    };
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span>[,] IV = {
        { IC },
        { IC },
        { IC },
        { IC }
    };
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span>[,] JH = {
        { JC, JC, JC, JC },
        { __, __, __, JC }
    };
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span>[,] JV = {
        { __, JC },
        { __, JC },
        { __, JC },
        { JC, JC }
    };
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">string</span>[][,] AvailablePieces = <span style="color:#66d9ef">new</span>[] { IV, IH, JV, JH };

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">string</span>[,] GetRandomPiece()
    {
        <span style="color:#66d9ef">var</span> random = <span style="color:#66d9ef">new</span> Random();
        <span style="color:#66d9ef">return</span> (<span style="color:#66d9ef">string</span>[,])AvailablePieces[random.Next(<span style="color:#ae81ff">0</span>, AvailablePieces.Length)].Clone();
    }
}
}
</code></pre></div></li>

<li><p>Wie du siehst, deckt der Code nur zwei Arten von Spielsteinen ab. Ergänze den Rest selbst. Bei Bedarf lass dir von jemandem aus dem Mentorenteam helfen.</p></li>
</ul>

                </div>
            </div>
        </div>
    </div>
</section>



    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p>
                        Coding Club Linz,
                        Birkenweg 16,
                        4060 Leonding
                        <br />
                        <a href="mailto:info@linz.coderdojo.net">info@linz.coderdojo.net</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>


    <!-- Js -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script src="https://linz-preview.coderdojo.net/js/wow.min.js"></script>
    <script src="https://linz-preview.coderdojo.net/js/main.js"></script>

</body>

</html>