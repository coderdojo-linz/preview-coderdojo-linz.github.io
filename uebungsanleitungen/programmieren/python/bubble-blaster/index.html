<!DOCTYPE html>
<html class="no-js" lang="de-AT">



<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Bubble Blaster </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.71.1" />
    <!-- Fonts -->
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,500,600,700,800' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">

    <!-- Stylesheets -->
    
    
    
    <link rel="stylesheet" href="https://linz-preview.coderdojo.net/vendor.min.55a3cbb6f035c25e5c7cf706ee053eca6f5a54d8095b05fd737d1b0330f99eaf.css">
    <link rel="stylesheet" href="https://linz-preview.coderdojo.net/css/animate.css">

    
    
    
    
    <link rel="stylesheet" href="https://linz-preview.coderdojo.net/style.min.8922caa9b983d40884574558110079e8df00f1ee2a8ccef702088e8753d14c76.css">
    <script src="https://kit.fontawesome.com/5bb5b2cc9c.js" crossorigin="anonymous"></script>
</head>

<body id="body">
    <!-- NAVIGATION -->

<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light ">
    <div class="container-fluid">
        <a class="navbar-brand" href="/"><img src="/img/logo.png" height="30"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/termine">Termine</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/info">Infos</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/mentoren">Mentoren</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/sponsoring">Sponsoring</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="/uebungsanleitungen">Übungsanleitungen</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

    

    
    

     

<div class="container-fluid breadcrumb-container">
    <div class="container">
        <nav class="breadcrumb-nav" aria-label="breadcrumb">
        <ol class="breadcrumb">
            
        
        
        
        
        
        
        
        
        

        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz-preview.coderdojo.net/uebungsanleitungen/">Übungsanleitungen</a>
        </li>
        
        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz-preview.coderdojo.net/uebungsanleitungen/programmieren/">Programmieren</a>
        </li>
        
        
        
        

        
        
        <li class="breadcrumb-item">
            <a href="https://linz-preview.coderdojo.net/uebungsanleitungen/programmieren/python/">Python</a>
        </li>
        
        
        
        

        
        
        
        
        </ol>

        
        </nav>
    </div>
</div> 

<section id="sushi">
    <div class="container">
        <div class="row">
            
            <div class="col-12 sushi-toc">
                <h2>Inhalt</h2>
                <nav id="TableOfContents">
<ul>
<li><a href="#bubble-blaster">Bubble Blaster</a>
<ul>
<li><a href="#voraussetzungen">Voraussetzungen</a></li>
<li><a href="#python">Python</a></li>
<li><a href="#laden-von-packages">Laden von Packages</a></li>
<li><a href="#ein-fenster-mit-einer-leinwand-erstellen">Ein Fenster mit einer Leinwand erstellen</a></li>
<li><a href="#das-u-boot-laden">Das U-Boot laden</a></li>
<li><a href="#das-u-boot-steuern">Das U-Boot steuern</a></li>
<li><a href="#bubbles-erzeugen">Bubbles erzeugen</a></li>
<li><a href="#bubbles-bewegen">Bubbles bewegen</a></li>
<li><a href="#hauptschleife-1-test">Hauptschleife – 1. Test</a></li>
<li><a href="#bubbles-entfernen">Bubbles entfernen</a></li>
<li><a href="#hauptschleife-2-test">Hauptschleife – 2. Test</a></li>
<li><a href="#bubbles-platzen-lassen">Bubbles platzen lassen</a></li>
<li><a href="#hauptschleife-3-test">Hauptschleife – 3. Test</a></li>
<li><a href="#zeit-und-punkte-anzeigen">Zeit und Punkte anzeigen</a></li>
<li><a href="#aktivierung-des-fensters">Aktivierung des Fensters</a></li>
<li><a href="#erweiterungsmöglichkeiten">Erweiterungsmöglichkeiten</a></li>
</ul></li>
</ul>
</nav>
            </div>
            <div class="col-12 sushi-content"> 

<h1 id="bubble-blaster">Bubble Blaster</h1>

<p>Mit dem Package Tkinter programmieren wir ein erstes Spiel in Python. Ein U-Boot, das mit Pfeiltasten gesteuert wird, soll in der vorgegebenen Zeit so viel Blasen wie möglich zum Platzen bringen. (Die Beschreibung erfolgt in Anlehnung an Beispiele aus dem Buch <a href="https://www.amazon.de/Programmieren-supereasy-Einfacher-Einstieg-SCRATCH/dp/3831027005/ref=sr_1_1?ie=UTF8&amp;qid=1452990098&amp;sr=8-1&amp;keywords=programmieren+f%C3%BCr+kinder" target="_blank">Programmieren supereasy</a>).</p>




     
    










<div class="row">
    <div class="col">
        <p></p>
    </div>
    <div class="col-12 col-md-12">
    <img src="/uebungsanleitungen/programmieren/python/bubble-blaster/img/bubble-blaster.png" alt="(.Get 1)" class="mx-xl-auto" style="margin-left: auto; margin-right: 0; display: block; width: auto" />
    </div>
</div>


<h2 id="voraussetzungen">Voraussetzungen</h2>

<p>Übungsbeispiel „Alien“</p>

<h2 id="python">Python</h2>

<p>Starte für Python die Programmierumgebung IDLE und öffne eine neue Datei (<code>File -&gt; New File</code>) und speichere die Datei als Dateityp auf deinem Computer (<code>File -&gt; Save As</code>). Wähle als Dateityp .pyw, wenn du mit Windows arbeitest.</p>

<h2 id="laden-von-packages">Laden von Packages</h2>

<p>Für dieses Beispiel verwenden wir das Package <code>tkinter</code>. Um Zufallszahlen zu genierieren, brauchen wir auch das Package <code>random</code>. Für die Anzeige der Zeit und kurzen Pausen zwischen den Bewegungen der Bubbles brauchen wir die Funktionen <code>sleep</code> und <code>time</code> aus dem Package time.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> tkinter <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
<span style="color:#f92672">from</span> random <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
<span style="color:#f92672">from</span> time <span style="color:#f92672">import</span> sleep, time</code></pre></div>
<h2 id="ein-fenster-mit-einer-leinwand-erstellen">Ein Fenster mit einer Leinwand erstellen</h2>

<p>Zuerst erzeugen wir ein neues Fenster, das wir <code>window</code> nennen. Als Titel wählen wir „Bubble Blaster“). Die Leinwand wird 500 Pixel hoch und 800 Pixel breit, der Hintergrund ist dunkelblau.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Leinwand erstellen</span>
H <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>
B <span style="color:#f92672">=</span> <span style="color:#ae81ff">800</span>
window <span style="color:#f92672">=</span> Tk()
window<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#34;Bubble Blaster&#34;</span>)
c <span style="color:#f92672">=</span> Canvas(window, width<span style="color:#f92672">=</span>B, height <span style="color:#f92672">=</span> H, bg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;darkblue&#34;</span>)
c<span style="color:#f92672">.</span>pack()</code></pre></div>
<h2 id="das-u-boot-laden">Das U-Boot laden</h2>

<p>Für das U-Boot laden wir ein Bild, das du <a href="img/uboot.png" target="_blank">hier</a> herunterladen kannst. Speichere dieses Bild in das gleiche Verzeichnis wie dein Python-Programm. Das geladene Bild positionieren wir dann in der Mitte der Leinwand (als x = B/2 und y = H/2). Den U-Boot Radius brauchen wir dann etwas später.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># U-Boot zeichnen</span>
img <span style="color:#f92672">=</span> PhotoImage(file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;uboot.png&#34;</span>)
uboot <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span>create_image(B<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>, H<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>, image<span style="color:#f92672">=</span>img)
UBOOT_R <span style="color:#f92672">=</span> <span style="color:#ae81ff">45</span></code></pre></div>
<h2 id="das-u-boot-steuern">Das U-Boot steuern</h2>

<p>Das U-Boot soll mit den Pfeiltasten bewegt werden. Bei jedem Tastendruck ändert sich die Position des U-Bootes um die U-Boot Geschwindigkeit, die wir hier mit 10 festlegen.</p>

<ul>
<li>Wird die Pfeiltaste „rechts“ gedrückt, wird die x -Koordinate um 10 größer, bei „links“ um 10 kleiner. Die y-Koordinate ändert sich nicht.</li>
<li>Bei Pfeiltaste „unten“ wird die y-Koordinate größer, bei „oben“ wird die y-Koordinate kleiner. (Der Koordinatenursprung ist links oben!) die x-Koordinate bleibt gleich.</li>

<li><p>Damit das U-Boot sich nicht über den Rand der Leinwand hinausbewegen kann, fragen wir zuerst die Koordinaten x, y des U-Boots ab. Die Bewegung des U-Boots wird nur dann durchgeführt, wenn das U-Boot auch nach der Bewegung innerhalb der Leinwand bleibt.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># U-Boot steuern</span>
UBOOT_GESCHW <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">uboot_bewegen</span>(event):
x, y <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span>coords(uboot)
<span style="color:#66d9ef">if</span> event<span style="color:#f92672">.</span>keysym <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Up&#34;</span>:
    <span style="color:#66d9ef">if</span> y <span style="color:#f92672">&gt;=</span> UBOOT_GESCHW:
        c<span style="color:#f92672">.</span>move(uboot, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span>UBOOT_GESCHW)
<span style="color:#66d9ef">elif</span> event<span style="color:#f92672">.</span>keysym <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Down&#34;</span>:
    <span style="color:#66d9ef">if</span> y <span style="color:#f92672">&lt;=</span> H <span style="color:#f92672">-</span> UBOOT_GESCHW:
        c<span style="color:#f92672">.</span>move(uboot, <span style="color:#ae81ff">0</span>, UBOOT_GESCHW)
<span style="color:#66d9ef">elif</span> event<span style="color:#f92672">.</span>keysym <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Left&#34;</span>:
    <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&gt;=</span> UBOOT_GESCHW:
        c<span style="color:#f92672">.</span>move(uboot, <span style="color:#f92672">-</span>UBOOT_GESCHW, <span style="color:#ae81ff">0</span>)
<span style="color:#66d9ef">elif</span> event<span style="color:#f92672">.</span>keysym <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Right&#34;</span>:
    <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&lt;=</span> B <span style="color:#f92672">-</span> UBOOT_GESCHW:
        c<span style="color:#f92672">.</span>move(uboot, UBOOT_GESCHW, <span style="color:#ae81ff">0</span>)
c<span style="color:#f92672">.</span>bind_all(<span style="color:#e6db74">&#34;&lt;Key&gt;&#34;</span>, uboot_bewegen)</code></pre></div></li>
</ul>

<h2 id="bubbles-erzeugen">Bubbles erzeugen</h2>

<p>Für die Bubbles laden wir auch ein Bild, das du <a href="img/bubble.png" target="_blank">hier</a> herunterladen kannst. Den Bubble Radius benötigen wir später. Im Gegensatz zum U-Boot, brauchen wir mehrere Bubbles, die von rechts nach links mit unterschiedlichen Geschwindigkeiten über den Bildschirm wandern und dann wieder verschwinden. Es entstehen auch laufend neue Bubbles. Um immer einen Überblick zu haben welche Bubbles mit welchen Geschwindigkeiten es gibt, verwenden wir zwei Listen:</p>

<ul>
<li><strong>bub_id</strong>: In dieser Liste merken wir uns den Namen (ID, eindeutige Nummer) der Bubbles. In eine Liste kann man mehrere Einträge mit Beistrichen getrennt hineinschreiben, zusammengefasst werden diese Einträge in Python mit einer eckigen Klammer. Zu Beginn haben wir noch keine Bubbles, also ist diese Liste noch leer.</li>
<li><strong>bub_geschw</strong>: Die Geschwindigkeiten schreiben wir auch in eine Liste, die ebenfalls zu Beginn noch leer ist.</li>
</ul>

<p>Die Geschwindigkeit der Bubbles beschränken wir durch die Konstante MAX_BUB_GESCHW, die wir auf 10 setzen und dann definieren wir noch eine Konstante GAP, die wir für die Anfangsposition der Bubbles brauchen.</p>

<p>Nun schreiben wir uns eine Funktion, die genau eine Bubble erzeugt. Die Bubble entsteht rechts etwas außerhalb unseres Fensters. Die x-Koordinate setzen wir auf die Fensterbreite plus unseren definierten GAP. Die y-Koordinate soll eine Zufallszahl zwischen 0 und H sein (dafür verwenden wir den Befehl <code>randint</code>) und auch die Geschwindigkeit v wählen wir zufällig zwischen 1 und der maximal möglichen Geschwindigkeit.</p>

<p>Nun erzeugen wir die Bubble und hängen die ID (id_num) an unsere ID-Liste an und die Geschwindigkeit hängen wir an unsere Geschwindigkeits-Liste an (mit der Methode <code>append</code>).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Bubbles erzeugen</span>
bubble_img <span style="color:#f92672">=</span> PhotoImage(file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bubble.png&#34;</span>)
BUB_R <span style="color:#f92672">=</span> <span style="color:#ae81ff">25</span>
bub_id <span style="color:#f92672">=</span> []
bub_geschw <span style="color:#f92672">=</span> []
MAX_BUB_GESCHW <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
GAP <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">erzeuge_bubble</span>():
    x <span style="color:#f92672">=</span> B <span style="color:#f92672">+</span> GAP
    y <span style="color:#f92672">=</span> randint(<span style="color:#ae81ff">0</span>, H)
    v <span style="color:#f92672">=</span> randint(<span style="color:#ae81ff">1</span>, MAX_BUB_GESCHW)
    id_num <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span>create_image(x, y, image <span style="color:#f92672">=</span> bubble_img)
    bub_id<span style="color:#f92672">.</span>append(id_num)
    bub_geschw<span style="color:#f92672">.</span>append(v)</code></pre></div>
<h2 id="bubbles-bewegen">Bubbles bewegen</h2>

<p>Für die Bewegung der Bubbles über den Bildschirm verwenden wir auch eine Funktion. Diese Funktion geht jede Bubble der Reihe nach durch. Die Anzahl der aktuell vorhandenen Bubbles bekommen wir über die Länge unserer ID-Liste: <code>len(bub_id)</code>. Bei jeder Bubble wird die x-Koordinate um ihre Geschwindigkeit verringert und die y-Koordinate gleich gelassen. Damit wandern die Bubbles horizontal nach links.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Bubbles bewegen</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bewege_bubbles</span>():
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(bub_id)):
        c<span style="color:#f92672">.</span>move(bub_id[i], <span style="color:#f92672">-</span>bub_geschw[i], <span style="color:#ae81ff">0</span>)</code></pre></div>
<h2 id="hauptschleife-1-test">Hauptschleife – 1. Test</h2>

<p>Nun ist es an der Zeit die, bis jetzt geschriebenen, Funktionen zu testen. In einer ersten Version unserer Hauptschleife verwenden wir eine Endlosschleife <code>(while True)</code>, in der wir laufend Blasen erzeugen, die Bubbles bewegen, das Fenster aktualisieren und dann kurz warten.</p>

<p>Damit nicht zu viele Blasen erzeugt werden, sondern nur durchschnittlich in einem Zehntel der Zeitschritte, erzeugen wir eine Zufallszahl zwischen 1 und 10. Nur wenn diese Zufallszahl 1 ist, dann erzeugen wir eine Bubble und sonst nicht.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># HAUPTSCHLEIFE</span>
<span style="color:#66d9ef">while</span> true:
  <span style="color:#66d9ef">if</span> randint(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
    erzeuge_bubble()
  bewege_bubbles()
  window<span style="color:#f92672">.</span>update()
  sleep(<span style="color:#ae81ff">0.01</span>)</code></pre></div>
<h2 id="bubbles-entfernen">Bubbles entfernen</h2>

<p>Jetzt beschäftigen wir uns mit dem Entfernen der Bubbles. Bubbles verschwinden, wenn sie komplett über den Bildschirm gewandert sind und auch wenn das U-Boot die Bubble zum Platzen gebracht hat. Für beides brauchen wir eine Funktion, die eine Bubble löschen kann.</p>

<p>Mit der Methode <code>delete</code> können wir das Bild einer Bubble entfernen, indem wir die ID angeben. Wir müssen aber auch unsere beiden Listen aktuell halten und dort die entsprechenden Einträge löschen.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Bubble löschen</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lösche_bubble</span>(i):
    c<span style="color:#f92672">.</span>delete(bub_id[i])
    <span style="color:#66d9ef">del</span> bub_id[i]
    <span style="color:#66d9ef">del</span> bub_geschw[i]</code></pre></div>
<p>Für das Entfernen der Bubbles, wenn sie über den linken Bildschirmrand hinausgewandert sind, verwenden wir folgende Funktion:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Bubbles entfernen (wenn sie über den Bildschirm gewandert sind)</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">entferne_bubbles</span>():
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(bub_id)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
        x, y <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span>coords(bub_id[i])
        <span style="color:#66d9ef">if</span> x <span style="color:#f92672">&lt;</span> <span style="color:#f92672">-</span>GAP:
            lösche_bubble(i)</code></pre></div>
<p>Auch hier gehen wir wieder jede Bubble durch, holen und die aktuellen Koordinaten mit der Methode <code>coords</code> und löschen die Bubble, wenn die x-Koordinate mehr als unser GAP hinter dem linken Fensterrand liegt. Aber Achtung: Hier müssen wir die Liste unserer Bubbles von hinten durcharbeiten, sonst kommt unserer Nummerierung der Bubbles durcheinander. Würden wir z. B. die zweite Bubble löschen, dann wäre Bubble Nr. 3 plötzlich Bubble Nr. 2. Wir beginnen also bei der letzten Bubble (diese hat die Nr. <code>len(bub_id)</code>-1, weil ja Python bei 0 zu zählen beginnt). Dann ändern wir die Nummer immer um -1 und lassen den <code>range</code> bis -1 laufen, da das <code>range</code>-Objekt den letzten Eintrag nicht mehr dazu nimmt, also ist 0 der letzte Wert, den wir für i bekommen.</p>

<h2 id="hauptschleife-2-test">Hauptschleife – 2. Test</h2>

<p>Das Entfernen der Bubbles können wir gleich in unsere Hauptschleife einbauen:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># HAUPTSCHLEIFE</span>
<span style="color:#66d9ef">while</span> true:
  <span style="color:#66d9ef">if</span> randint(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
    erzeuge_bubble()
  bewege_bubbles()
  entferne_bubbles()
  window<span style="color:#f92672">.</span>update()
  sleep(<span style="color:#ae81ff">0.01</span>)</code></pre></div>
<h2 id="bubbles-platzen-lassen">Bubbles platzen lassen</h2>

<p>Wenn eine Bubble vom U-Boot getroffen wird, soll sie platzen und vom Bildschirm verschwinden. Um feststellen zu können, ob das U-Boot eine Bubble trifft, brauchen wir eine Funktion, die den Abstand zwischen dem U-Boot und einer Bubble berechnen kann. Dazu holen wir uns die aktuellen Koordinaten von U-Boot und Bubble und wenden den Satz von Pythagoras an. Die dazu notwendige Wurzelfunktion (<code>sqrt</code>) importieren wir aus dem <code>math</code>-Package. Der Abstand a wird als Wert der Funktion ausgegeben.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Entfernung zwischen Punkten</span>
<span style="color:#f92672">from</span> math <span style="color:#f92672">import</span> sqrt
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">abstand</span>(uboot, id_bubble):
    x1, y1 <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span>coords(uboot)
    x2, y2 <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span>coords(id_bubble)
    a <span style="color:#f92672">=</span> sqrt((x2<span style="color:#f92672">-</span>x1)<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> (y2<span style="color:#f92672">-</span>y1)<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span>)
    <span style="color:#66d9ef">return</span> a</code></pre></div>
<p>In einer Schleife gehen wir die Liste der Bubbles wieder von hinten durch. Wenn der Abstand zwischen U-Boot und Bubble kleiner ist als die Summe von U-Boot-Radius und Bubble-Radius, dann hat das U-Boot die Bubble getroffen. Wir erhöhen die Punkteanzahl, die wir zu Beginn auf 0 gesetzt haben um den Bubble-Radius + Bubble-Geschwindigkeit. Damit erreichen wir mehr Punkte, wenn die Bubble schneller ist. Die getroffene Bubble wird gelöscht und die erreichte Punkteanzahl wird ausgegeben.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Bubbles platzen lassen (wenn sie vom U-Boot getroffen werden)</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">treffer</span>():
    punkte <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(bub_id)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
        <span style="color:#66d9ef">if</span> abstand(uboot, bub_id[i]) <span style="color:#f92672">&lt;</span> (UBOOT_R <span style="color:#f92672">+</span> BUB_R):
            punkte <span style="color:#f92672">+=</span> (BUB_R <span style="color:#f92672">+</span> bub_geschw[i])
            lösche_bubble(i)
    <span style="color:#66d9ef">return</span> punkte</code></pre></div>
<h2 id="hauptschleife-3-test">Hauptschleife – 3. Test</h2>

<p>Um diese Funktion zu testen, bauen wir eine Variable score, die die Gesamtpunkteanzahl abspeichert, in die Hauptschleife ein. Zu Beginn ist die Punkteanzahl 0 und in jedem Zeitschritt wird die Punkteanzahl um die erreichten Treffer erhöht. Um die Punkteanzahl mitzuverfolgen, lassen wir sie im Shell-Fenster ausgeben.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># HAUPTSCHLEIFE</span>
score <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
<span style="color:#66d9ef">while</span> true:
  <span style="color:#66d9ef">if</span> randint(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
    erzeuge_bubble()
  bewege_bubbles()
  entferne_bubbles()
  score <span style="color:#f92672">+=</span> treffer()
  <span style="color:#66d9ef">print</span> (score)
  window<span style="color:#f92672">.</span>update()
  sleep(<span style="color:#ae81ff">0.01</span>)</code></pre></div>
<h2 id="zeit-und-punkte-anzeigen">Zeit und Punkte anzeigen</h2>

<p>In der Endversion des Spiels soll die Zeit und die Punktanzahl in unserem Fenster angezeigt werden. Wir schreiben dazu <code>create_text</code> einen passenden Text in die linke obere Ecke unserer Leinwand. Die beiden Zahlen geben die x und y Koordinaten an, mit der Option <code>fill</code> wird die Textfarbe festgelegt. Für die Anzeige der aktuellen Zeit und Punkteanzahl erzeugen wir die Objekte <code>time_text</code> und <code>score_text</code>. Mit den Funktionen <code>zeige_punkte</code> und <code>zeige_zeit</code>, ändern wir diese Objekte so, dass immer der aktuelle Stand zu sehen ist. Achtung: Der Text muss immer vom Datentyp string sein. Da die Zeit und die Punkte Zahlen sind, müssen wir sie mit der Funktion <code>str</code> in einen string umwandeln.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Zeit und Punkte anzeigen</span>
c<span style="color:#f92672">.</span>create_text(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">30</span>, text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ZEIT&#34;</span>, fill<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>)
c<span style="color:#f92672">.</span>create_text(<span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">30</span>, text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PUNKTE&#34;</span>, fill<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>)
time_text <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span>create_text(<span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">50</span>, fill<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>)
score_text <span style="color:#f92672">=</span> c<span style="color:#f92672">.</span>create_text(<span style="color:#ae81ff">150</span>, <span style="color:#ae81ff">50</span>, fill<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;white&#34;</span>)
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">zeige_punkte</span>(score):
    c<span style="color:#f92672">.</span>itemconfig(score_text, text <span style="color:#f92672">=</span> str(score))
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">zeige_zeit</span>(time_left):
    c<span style="color:#f92672">.</span>itemconfig(time_text, text<span style="color:#f92672">=</span>str(time_left))</code></pre></div>
<p>Hauptschleife - komplett
Nun können wir die Hauptschleife fertigstellen. Wir geben ein Zeitlimit von 30 Sekunden für das Spiel vor. In der Variable <code>ende</code> speichern wir den Endzeitpunkt des Spiels. Das ist die aktuelle Zeit, wenn das Spiel gestartet wird plus unser Zeitlimit. Die aktuelle Zeit bekommen wir mit dem Befehl <code>time()</code>. Anstelle der Endlosschleife überprüfen wir, ob unsere Spielzeit noch nicht abgelaufen ist. In der Schleife ergänzen wir die Anzeige der aktuellen Zeit und der Punkte.</p>

<p>Ist das Spiel aus, zeigen wir den Text „GAME OVER“ und die erreichte Punkteanzahl an.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># HAUPTSCHLEIFE</span>
score <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
TIME_LIMIT <span style="color:#f92672">=</span> <span style="color:#ae81ff">30</span>
ende <span style="color:#f92672">=</span> time() <span style="color:#f92672">+</span> TIME_LIMIT
<span style="color:#66d9ef">while</span> time() <span style="color:#f92672">&lt;</span> ende:
    <span style="color:#66d9ef">if</span> randint(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">10</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
        erzeuge_bubble()
    bewege_bubbles()
    entferne_bubbles()
    score <span style="color:#f92672">+=</span> treffer()
    zeige_punkte(score)
    zeige_zeit(int(ende<span style="color:#f92672">-</span>time()))
    window<span style="color:#f92672">.</span>update()
    sleep(<span style="color:#ae81ff">0.01</span>)

c<span style="color:#f92672">.</span>create_text(B<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>, H<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>, text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;GAME OVER&#34;</span>, \
              fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>, font<span style="color:#f92672">=</span>(<span style="color:#e6db74">&#34;Helvetica&#34;</span>, <span style="color:#ae81ff">30</span>))
c<span style="color:#f92672">.</span>create_text(B<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>, H<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">30</span>, \
              text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Punkte: &#34;</span> <span style="color:#f92672">+</span> str(score), fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>)</code></pre></div>
<h2 id="aktivierung-des-fensters">Aktivierung des Fensters</h2>

<p>Zu guter Letzt gibt es noch einen Befehl, um das Fenster zu aktivieren:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Aktivierung des Fensters</span>
window<span style="color:#f92672">.</span>mainloop()</code></pre></div>
<p>Wenn du nun das Programm speicherst (STRG + S), kannst du es ausführen (F5). Wie viele Punkte kannst du erreichen?</p>

<h2 id="erweiterungsmöglichkeiten">Erweiterungsmöglichkeiten</h2>

<ul>
<li>Zeichne, anstelle des Bubble-Bildes, Kreise als Bubbles. Die Kreise können unterschiedliche Größen und Farben haben. Wenn Bubbles mit einer bestimmten Farbe zum Platzen gebracht werden, gibt es die doppelte Punkteanzahl.</li>
<li>Erstelle eine Highscore-Liste, auf der die höchsten Punktezahlen gespeichert werden.</li>
<li>Gib 30 Sekunden Bonus-Zeit zum Spielen, wenn in der vorgegebenen Zeit mindestens 2000 Punkte erreicht werden.</li>
</ul>
 </div>
        </div>
    </div>
</section> 

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p>
                        Coding Club Linz,
                        Birkenweg 16,
                        4060 Leonding
                        <br />
                        <a href="mailto:info@linz.coderdojo.net">info@linz.coderdojo.net</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>


    <!-- Js -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script src="https://linz-preview.coderdojo.net/js/wow.min.js"></script>
    <script src="https://linz-preview.coderdojo.net/js/main.js"></script>

</body>

</html>